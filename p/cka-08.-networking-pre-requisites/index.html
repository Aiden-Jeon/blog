<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="CKAë¥¼ ì¤€ë¹„í•˜ë©´ì„œ ê³µë¶€í•œ ìš”ì•½ ë‚´ìš©ì…ë‹ˆë‹¤.\nê°•ì˜ What is CKA? Pre-Requisites Switching and Routing Switching Routing Default Gateway DNS DNS Configurations on Linux CoreDNS Introduction Network Namespaces Docker Networking Switching Routing Switching ìƒí™© There are two computers and want to communicate to each other â†’ use switch ë°©ë²• see the interface of host ip link look at the interface named eth0 assume ip address switch: 192.168.1.0 give ip to hosts ip addr add <ip>/<port> <hostname> <interface> A: 192.168.1.10 ip addr add 192.168.1.10/24 dev eth0 B: 192.168.1.11 ip addr add 192.168.1.11/24 dev eth0 Two computers can communicate each other through switch ping 192.16.1.11 íŠ¹ì§• switch can only enable communications within network it can receive packets from a host on the network and deliver it to other system within the same network Routing "><title>(CKA) 08. Networking Pre-requisites</title>
<link rel=canonical href=https://aiden-jeon.github.io/blog/p/cka-08.-networking-pre-requisites/><link rel=stylesheet href=/blog/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="(CKA) 08. Networking Pre-requisites"><meta property='og:description' content="CKAë¥¼ ì¤€ë¹„í•˜ë©´ì„œ ê³µë¶€í•œ ìš”ì•½ ë‚´ìš©ì…ë‹ˆë‹¤.\nê°•ì˜ What is CKA? Pre-Requisites Switching and Routing Switching Routing Default Gateway DNS DNS Configurations on Linux CoreDNS Introduction Network Namespaces Docker Networking Switching Routing Switching ìƒí™© There are two computers and want to communicate to each other â†’ use switch ë°©ë²• see the interface of host ip link look at the interface named eth0 assume ip address switch: 192.168.1.0 give ip to hosts ip addr add <ip>/<port> <hostname> <interface> A: 192.168.1.10 ip addr add 192.168.1.10/24 dev eth0 B: 192.168.1.11 ip addr add 192.168.1.11/24 dev eth0 Two computers can communicate each other through switch ping 192.16.1.11 íŠ¹ì§• switch can only enable communications within network it can receive packets from a host on the network and deliver it to other system within the same network Routing "><meta property='og:url' content='https://aiden-jeon.github.io/blog/p/cka-08.-networking-pre-requisites/'><meta property='og:site_name' content="Aiden's Camp"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='k8s'><meta property='article:tag' content='cka'><meta property='article:published_time' content='2021-06-06T00:00:00+00:00'><meta property='article:modified_time' content='2021-06-06T00:00:00+00:00'><meta name=twitter:title content="(CKA) 08. Networking Pre-requisites"><meta name=twitter:description content="CKAë¥¼ ì¤€ë¹„í•˜ë©´ì„œ ê³µë¶€í•œ ìš”ì•½ ë‚´ìš©ì…ë‹ˆë‹¤.\nê°•ì˜ What is CKA? Pre-Requisites Switching and Routing Switching Routing Default Gateway DNS DNS Configurations on Linux CoreDNS Introduction Network Namespaces Docker Networking Switching Routing Switching ìƒí™© There are two computers and want to communicate to each other â†’ use switch ë°©ë²• see the interface of host ip link look at the interface named eth0 assume ip address switch: 192.168.1.0 give ip to hosts ip addr add <ip>/<port> <hostname> <interface> A: 192.168.1.10 ip addr add 192.168.1.10/24 dev eth0 B: 192.168.1.11 ip addr add 192.168.1.11/24 dev eth0 Two computers can communicate each other through switch ping 192.16.1.11 íŠ¹ì§• switch can only enable communications within network it can receive packets from a host on the network and deliver it to other system within the same network Routing "><link rel="shortcut icon" href=/blog/icons/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-419F58RW9W"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-419F58RW9W")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/blog/><img src=/blog/imgs/avatar_hu6933059792947527008.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ”¥</span></figure><div class=site-meta><h1 class=site-name><a href=/blog>Aiden's Camp</a></h1><h2 class=site-description>Welcome to Aiden's Camp</h2></div></header><ol class=menu-social><li><a href=https://github.com/Aiden-Jeon target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/jongseob-jeon/ target=_blank title=Linkedin rel=me><svg fill="#000" height="800" width="800" id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 310 310"><g id="XMLID_801_"><path id="XMLID_802_" d="M72.16 99.73H9.927c-2.762.0-5 2.239-5 5v199.928c0 2.762 2.238 5 5 5H72.16c2.762.0 5-2.238 5-5V104.73c0-2.76100000000001-2.238-5-5-5z"/><path id="XMLID_803_" d="M41.066.341C18.422.341.0 18.743.0 41.362.0 63.991 18.422 82.4 41.066 82.4c22.626.0 41.033-18.41 41.033-41.038C82.1 18.743 63.692.341 41.066.341z"/><path id="XMLID_804_" d="M230.454 94.761c-24.995.0-43.472 10.745-54.679 22.954V104.73c0-2.761-2.238-5-5-5h-59.599c-2.762.0-5 2.239-5 5v199.928c0 2.762 2.238 5 5 5h62.097c2.762.0 5-2.238 5-5V205.74c0-33.333 9.054-46.319 32.29-46.319 25.306.0 27.317 20.818 27.317 48.034v97.204c0 2.762 2.238 5 5 5H305c2.762.0 5-2.238 5-5V194.995C310 145.43 300.549 94.761 230.454 94.761z"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/blog/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/blog/categories><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>Categories</span></a></li><li><a href=/blog/tags><svg class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>Tags</span></a></li><li><a href=/blog/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/blog/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/blog/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#pre-requisites>Pre-Requisites</a></li><li><a href=#switching-routing>Switching Routing</a><ul><li><a href=#switching>Switching</a><ul><li><a href=#ìƒí™©>ìƒí™©</a></li><li><a href=#ë°©ë²•>ë°©ë²•</a></li><li><a href=#íŠ¹ì§•>íŠ¹ì§•</a></li></ul></li><li><a href=#routing>Routing</a><ul><li><a href=#ìƒí™©-1>ìƒí™©</a></li><li><a href=#ë°©ë²•-1>ë°©ë²•</a></li></ul></li><li><a href=#gateway>Gateway</a><ul><li><a href=#ìƒí™©-2>ìƒí™©</a></li><li><a href=#ë°©ë²•-2>ë°©ë²•</a></li></ul></li><li><a href=#internet>Internet</a><ul><li><a href=#ìƒí™©-3>ìƒí™©</a></li><li><a href=#ë°©ë²•-3>ë°©ë²•</a></li></ul></li><li><a href=#default-gateway>Default gateway</a><ul><li><a href=#ìƒí™©-4>ìƒí™©</a></li><li><a href=#ë°©ë²•-4>ë°©ë²•</a></li></ul></li><li><a href=#linux-as-a-host>Linux as a host</a><ul><li><a href=#ìƒí™©-5>ìƒí™©</a></li><li><a href=#ë°©ë²•-5>ë°©ë²•</a></li></ul></li><li><a href=#take-aways>Take Aways</a><ul><li><a href=#ip>ip</a></li></ul></li></ul></li><li><a href=#dns>DNS</a><ul><li><a href=#name-resolution>Name Resolution</a><ul><li><a href=#ìƒí™©-6>ìƒí™©</a></li><li><a href=#ë°©ë²•-6>ë°©ë²•</a></li><li><a href=#íŠ¹ì§•-1>íŠ¹ì§•</a></li></ul></li><li><a href=#dns-server>DNS Server</a><ul><li><a href=#ìƒí™©-7>ìƒí™©</a></li><li><a href=#ë°©ë²•-7>ë°©ë²•</a></li><li><a href=#íŠ¹ì§•-2>íŠ¹ì§•</a></li></ul></li><li><a href=#domain-names>Domain Names</a><ul><li><a href=#structure>Structure</a></li><li><a href=#in-public>In public</a></li></ul></li><li><a href=#in-private>In private</a></li><li><a href=#record-types>Record Types</a></li><li><a href=#tools>Tools</a><ul><li><a href=#nslookup>nslookup</a></li><li><a href=#dig>dig</a></li></ul></li></ul></li><li><a href=#network-namespaces>Network Namespaces</a><ul><li><a href=#process-namespace>Process Namespace</a></li><li><a href=#network-namespace>Network namespace</a><ul><li><a href=#ë°©ë²•-8>ë°©ë²•</a></li><li><a href=#create-network-namespace>Create network namespace</a></li><li><a href=#exec-in-network-ns>Exec in network ns</a></li></ul></li><li><a href=#connect>Connect</a><ul><li><a href=#ë°©ë²•-9>ë°©ë²•</a></li><li><a href=#í™•ì¸>í™•ì¸</a></li></ul></li><li><a href=#virtual-network>Virtual network</a><ul><li><a href=#ìƒì„±>ìƒì„±</a></li><li><a href=#ì—°ê²°>ì—°ê²°</a></li><li><a href=#host-and-namespace>Host and namespace</a></li></ul></li><li><a href=#localhost>Localhost</a><ul><li><a href=#ìƒí™©-8>ìƒí™©</a></li><li><a href=#ë°©ë²•-10>ë°©ë²•</a></li></ul></li></ul></li><li><a href=#docker-networking>Docker Networking</a><ul><li><a href=#single-docker-host>Single Docker host</a><ul><li><a href=#none-network>None network</a></li><li><a href=#host-network>Host network</a></li><li><a href=#bridge>Bridge</a></li></ul></li><li><a href=#bridge-1>Bridge</a><ul><li><a href=#ìƒíƒœ>ìƒíƒœ</a></li><li><a href=#ìƒì„±-1>ìƒì„±</a></li></ul></li><li><a href=#attach-container-to-the-bridge>Attach container to the bridge</a></li><li><a href=#port-mapping>Port Mapping</a><ul><li><a href=#ë°©ë²•-11>ë°©ë²•</a></li></ul></li></ul></li><li><a href=#cluster-networking>Cluster Networking</a><ul><li><a href=#ip--fqdn>IP & FQDN</a></li><li><a href=#ports>PORTS</a><ul><li><a href=#master>Master</a></li><li><a href=#worker>Worker</a></li></ul></li><li><a href=#practice>Practice</a><ul><li><a href=#what-is-the-network-interface-configured-for-cluster-connectivity-on-the-master-node-node-to-node-communication>What is the network interface configured for cluster connectivity on the master node? node-to-node communication</a></li><li><a href=#what-is-the-mac-address-assigned-to-node01>What is the MAC address assigned to node01?</a></li></ul></li></ul></li></ul></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/blog/categories/kubernetes/>Kubernetes</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/blog/p/cka-08.-networking-pre-requisites/>(CKA) 08. Networking Pre-requisites</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 06, 2021</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>10 minute read</time></div></footer></div></header><section class=article-content><p>CKAë¥¼ ì¤€ë¹„í•˜ë©´ì„œ ê³µë¶€í•œ ìš”ì•½ ë‚´ìš©ì…ë‹ˆë‹¤.</p><ul><li><a class=link href=https://www.udemy.com/course/certified-kubernetes-administrator-with-practice-tests/ target=_blank rel=noopener>ê°•ì˜</a></li><li><a class=link href=https://www.cncf.io/certification/cka/ target=_blank rel=noopener>What is CKA?</a></li></ul><h2 id=pre-requisites><a href=#pre-requisites class=header-anchor></a>Pre-Requisites</h2><ul><li>Switching and Routing<ul><li>Switching</li><li>Routing</li><li>Default Gateway</li></ul></li><li>DNS<ul><li>DNS Configurations on Linux</li><li>CoreDNS Introduction</li></ul></li><li>Network Namespaces</li><li>Docker Networking</li></ul><h2 id=switching-routing><a href=#switching-routing class=header-anchor></a>Switching Routing</h2><h3 id=switching><a href=#switching class=header-anchor></a>Switching</h3><p><img src=/imgs/cka/networking-pre-1.png loading=lazy alt=switching></p><h4 id=ìƒí™©><a href=#%ec%83%81%ed%99%a9 class=header-anchor></a>ìƒí™©</h4><ul><li>There are two computers and want to communicate to each other<ul><li>â†’ use switch</li></ul></li></ul><h4 id=ë°©ë²•><a href=#%eb%b0%a9%eb%b2%95 class=header-anchor></a>ë°©ë²•</h4><ol><li>see the interface of host<ul><li><code>ip link</code></li><li>look at the interface named <code>eth0</code></li></ul></li><li>assume ip address<ul><li>switch: 192.168.1.0</li></ul></li><li>give ip to hosts<ul><li><code>ip addr add &lt;ip>/&lt;port> &lt;hostname> &lt;interface></code></li><li>A: 192.168.1.10<ul><li><code>ip addr add 192.168.1.10/24 dev eth0</code></li></ul></li><li>B: 192.168.1.11<ul><li><code>ip addr add 192.168.1.11/24 dev eth0</code></li></ul></li></ul></li><li>Two computers can communicate each other through switch<ul><li><code>ping 192.16.1.11</code></li></ul></li></ol><h4 id=íŠ¹ì§•><a href=#%ed%8a%b9%ec%a7%95 class=header-anchor></a>íŠ¹ì§•</h4><ul><li>switch can only enable communications within network</li><li>it can receive packets from a host on the network and deliver it to other system within the same network</li></ul><h3 id=routing><a href=#routing class=header-anchor></a>Routing</h3><p><img src=/imgs/cka/networking-pre-2.png loading=lazy alt=routing></p><h4 id=ìƒí™©-1><a href=#%ec%83%81%ed%99%a9-1 class=header-anchor></a>ìƒí™©</h4><ul><li>New system exists<ul><li>Two computer name with C, D</li><li>Ip address<ul><li>C: 192.168.2.10</li><li>D: 192.168.2.11</li></ul></li></ul></li><li>How does computer A reach to computer c?</li><li>â†’ Router<ul><li>helps connect two networks together.</li></ul></li></ul><h4 id=ë°©ë²•-1><a href=#%eb%b0%a9%eb%b2%95-1 class=header-anchor></a>ë°©ë²•</h4><ol><li>Connecting two networks, it need two ip assigned.<ul><li>first network (A&amp;B): 192.168.1.1</li><li>second network (C&amp;D): 192.168.2.1</li></ul></li><li>Send A to C<ul><li>how does know where is C?</li><li>â†’ Gateway</li></ul></li></ol><h3 id=gateway><a href=#gateway class=header-anchor></a>Gateway</h3><p><img src=/imgs/cka/networking-pre-3.png loading=lazy alt=gateway></p><h4 id=ìƒí™©-2><a href=#%ec%83%81%ed%99%a9-2 class=header-anchor></a>ìƒí™©</h4><ul><li>network â† room</li><li>gateway â† a door to the outside world to other networks</li></ul><h4 id=ë°©ë²•-2><a href=#%eb%b0%a9%eb%b2%95-2 class=header-anchor></a>ë°©ë²•</h4><ol><li>systems need to know where that door is to go through<ul><li>to see the existing routing configuration on a system</li><li><code>route</code></li><li>displays the kernels routing table</li></ul></li><li>Configure a gateway<ol><li><code>ip route add 192.168.2.0/24 via 192.168.1.1</code><ul><li>â†’ you can reach the 192.168.2.0 network through the door or gateway at 192.168.1.11</li></ul></li><li><code>route</code><ul><li>see the route added</li></ul></li></ol></li><li>Configure on all system<ol><li><code>ip route add 192.168.1.0/24 via 192.168.2.1</code></li><li><code>route</code></li></ol></li></ol><h3 id=internet><a href=#internet class=header-anchor></a>Internet</h3><h4 id=ìƒí™©-3><a href=#%ec%83%81%ed%99%a9-3 class=header-anchor></a>ìƒí™©</h4><ul><li>System need acces to the internet</li></ul><h4 id=ë°©ë²•-3><a href=#%eb%b0%a9%eb%b2%95-3 class=header-anchor></a>ë°©ë²•</h4><ul><li><code>ip route add 172.217.194.0/24 via 192.168.2.1</code><ul><li>add a new road in routing table to road all traffic to the network 172.217.194.0</li></ul></li></ul><h3 id=default-gateway><a href=#default-gateway class=header-anchor></a>Default gateway</h3><p><img src=/imgs/cka/networking-pre-4.png loading=lazy alt=default-gateway></p><h4 id=ìƒí™©-4><a href=#%ec%83%81%ed%99%a9-4 class=header-anchor></a>ìƒí™©</h4><ul><li>any request to any network outside of existing network goes to this particular router</li></ul><h4 id=ë°©ë²•-4><a href=#%eb%b0%a9%eb%b2%95-4 class=header-anchor></a>ë°©ë²•</h4><ul><li><code>ip route add default via 192.168.2.1</code></li><li>also can called 0.0.0.0<ul><li><code>ip route add 0.0.0.0 via 192.168.2.1</code></li></ul></li><li>if default gateway is defined, in same network there is no need to add 192.168.1.0</li><li>in sepreated network<ul><li>one entry for private network</li><li><code>ip addr add 192.168.1.0/24 via 192.168.2.2</code></li></ul></li></ul><h3 id=linux-as-a-host><a href=#linux-as-a-host class=header-anchor></a>Linux as a host</h3><p><img src=/imgs/cka/networking-pre-5.png loading=lazy alt=linux-host></p><h4 id=ìƒí™©-5><a href=#%ec%83%81%ed%99%a9-5 class=header-anchor></a>ìƒí™©</h4><ul><li>3 hosts, A, B, C</li><li>host B is connected to both networks using eth0 and eth1<ul><li>A&amp;B are connected with 192.168.1.0</li><li>B&amp;C are connected with 192.168.2.0</li></ul></li><li>how to reach from A to C<ul><li>â†’ need to tell host A that the door or gateway to network C is through host B</li></ul></li></ul><h4 id=ë°©ë²•-5><a href=#%eb%b0%a9%eb%b2%95-5 class=header-anchor></a>ë°©ë²•</h4><ol><li>add a routing table entry<ul><li><code>ip route add 192.168.2.0/24 via 192.168.1.6</code></li></ul></li><li>when packet is reached to host C, host C will have to send back response to host A<ul><li><code>ip route add 192.168.1.0/24 via 192.168.2.6</code></li></ul></li><li>in Linux, packets are not forwarded from one interface to the next<ul><li>eg) pacets receivced on eht0 on host B, are not forwarded to through eth1</li><li>eth0: private, eth1: public</li></ul></li><li>allow forward<ul><li>default: denied<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; cat /proc/sys/net/ipv4/ip_forward
</span></span><span class=line><span class=cl><span class=m>0</span>
</span></span></code></pre></td></tr></table></div></div></li><li>set allowed<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; <span class=nb>echo</span> 1&gt; /proc/sys/net/ipv4/ip_forward
</span></span><span class=line><span class=cl><span class=m>1</span>
</span></span></code></pre></td></tr></table></div></div></li><li>this is not persistant, changed if reboot.</li><li>to make persistent, modify the same value in the <code>/etc/sysctl.conf</code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>net.ipv4.ip_forward<span class=o>=</span><span class=m>1</span>
</span></span></code></pre></td></tr></table></div></div></li></ul></li></ol><h3 id=take-aways><a href=#take-aways class=header-anchor></a>Take Aways</h3><h4 id=ip><a href=#ip class=header-anchor></a>ip</h4><ul><li><code>ip link</code><ul><li>to list and modify interfactes on the host</li></ul></li><li><code>ip addr</code><ul><li>to see the ip addresses assigned to those interface</li></ul></li><li><code>ip addr ad</code><ul><li>add IP addresses on the interfaces</li></ul></li></ul><h2 id=dns><a href=#dns class=header-anchor></a>DNS</h2><h3 id=name-resolution><a href=#name-resolution class=header-anchor></a>Name Resolution</h3><p><img src=/imgs/cka/networking-pre-6.png loading=lazy alt=name-resolution></p><h4 id=ìƒí™©-6><a href=#%ec%83%81%ed%99%a9-6 class=header-anchor></a>ìƒí™©</h4><ul><li>two computers A and B<ul><li>same network</li><li>assigned IP<ul><li>A: 192.168.1.0</li><li>B: 192.168.1.11</li></ul></li></ul></li><li>able to ping one computer to others with IP<ul><li><code>ping 192.168.1.11</code></li></ul></li><li>B has a database service<ul><li>give a name DB</li></ul></li><li>want to ping to B, using DB instead of IP address<ul><li><code>ping db</code></li><li>â†’ err: <code>ping :unkown host db</code></li></ul></li></ul><h4 id=ë°©ë²•-6><a href=#%eb%b0%a9%eb%b2%95-6 class=header-anchor></a>ë°©ë²•</h4><ol><li>When i say db, it means IP 192.161.1.11<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat &gt;&gt; /etc/hosts
</span></span><span class=line><span class=cl>192.168.1.11 db
</span></span></code></pre></td></tr></table></div></div></li><li><code>ping db</code><ul><li>successful</li></ul></li></ol><h4 id=íŠ¹ì§•-1><a href=#%ed%8a%b9%ec%a7%95-1 class=header-anchor></a>íŠ¹ì§•</h4><ul><li>doesn&rsquo;t matter real host name</li><li>can have many names</li><li>need to all specify other system
<img src=/imgs/cka/networking-pre-7.png loading=lazy alt=name-resoltuions></li></ul><h3 id=dns-server><a href=#dns-server class=header-anchor></a>DNS Server</h3><p><img src=/imgs/cka/networking-pre-8.png loading=lazy alt=before-dns-server>
<img src=/imgs/cka/networking-pre-9.png loading=lazy alt=after-dns-server></p><h4 id=ìƒí™©-7><a href=#%ec%83%81%ed%99%a9-7 class=header-anchor></a>ìƒí™©</h4><ul><li>until the enviroment grew and these files got filled with too many entries</li><li>managing these files too hard</li><li>move all these files in one server</li><li>â†’ DNS Server<ul><li>point all hosts to look up tahat server</li><li>ip: 192.168.1.100</li></ul></li></ul><h4 id=ë°©ë²•-7><a href=#%eb%b0%a9%eb%b2%95-7 class=header-anchor></a>ë°©ë²•</h4><p><img src=/imgs/cka/networking-pre-10.png loading=lazy alt=how-dns-server></p><ol><li>add entry<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /etc/resolv.conf
</span></span><span class=line><span class=cl>nameserver   192.168.1.100
</span></span></code></pre></td></tr></table></div></div></li><li>configure in all host</li></ol><h4 id=íŠ¹ì§•-2><a href=#%ed%8a%b9%ec%a7%95-2 class=header-anchor></a>íŠ¹ì§•</h4><ul><li>also can use <code>/etc/hosts</code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat &gt;&gt; /etc/hosts
</span></span><span class=line><span class=cl>192.168.1.115    <span class=nb>test</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>ping test</code></li></ul></li><li>if an entry in both places<ul><li>host first looks in the local <code>/etc/hosts</code></li><li>and then look at the name sever</li></ul></li><li>order can change<ul><li><code>etc/nsswitch.conf</code></li></ul></li><li>multiple name server is possible</li></ul><h3 id=domain-names><a href=#domain-names class=header-anchor></a>Domain Names</h3><h4 id=structure><a href=#structure class=header-anchor></a>Structure</h4><p><img src=/imgs/cka/networking-pre-11.png loading=lazy alt=domain-name-structure></p><ul><li>tree structure<ul><li>.com<ul><li>top level domain</li></ul></li><li>google<ul><li>domain name</li></ul></li><li>www<ul><li>subdomain<ul><li>helping further grouping things together</li><li>eg) maps, drive, ..</li></ul></li></ul></li></ul></li></ul><h4 id=in-public><a href=#in-public class=header-anchor></a>In public</h4><p><img src=/imgs/cka/networking-pre-12.png loading=lazy alt=domain-name-works-public></p><ol><li>request hits organization&rsquo;s internal DNS server</li><li>forwards request to the Internet<ul><li>point to a serving .com</li></ul></li><li>forwards to Google</li><li>Google DNS server provides IP of ther serving the apps applications</li><li>to speed up all future results, organization&rsquo;s DNS server choose to cache this IP</li></ol><h3 id=in-private><a href=#in-private class=header-anchor></a>In private</h3><p><img src=/imgs/cka/networking-pre-13.png loading=lazy alt=domain-names-works-private></p><ul><li>within in company do not wany to use domain name<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat &gt;&gt; /etc/resolv.conf
</span></span><span class=line><span class=cl>nameserver   192.168.1.100
</span></span><span class=line><span class=cl>search       mycompany.com
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=record-types><a href=#record-types class=header-anchor></a>Record Types</h3><p><img src=/imgs/cka/networking-pre-14.png loading=lazy alt=record-types></p><h3 id=tools><a href=#tools class=header-anchor></a>Tools</h3><h4 id=nslookup><a href=#nslookup class=header-anchor></a>nslookup</h4><p><img src=/imgs/cka/networking-pre-15.png loading=lazy alt=nslookup></p><ul><li>to query hostname from a DNS server</li><li>does not consider the entries in the local <code>/etc/hosts</code> file<ul><li>entry for web application has to be present in DNS server.</li></ul></li></ul><h4 id=dig><a href=#dig class=header-anchor></a>dig</h4><p><img src=/imgs/cka/networking-pre-16.png loading=lazy alt=dig></p><ul><li>give more information</li></ul><h2 id=network-namespaces><a href=#network-namespaces class=header-anchor></a>Network Namespaces</h2><h3 id=process-namespace><a href=#process-namespace class=header-anchor></a>Process Namespace</h3><p><img src=/imgs/cka/networking-pre-17.png loading=lazy alt=process-name></p><ul><li>container host<ul><li>create a container, want to make sure that it is isolated</li><li>create a special room, called namespace</li><li>only sees the processes run by container</li></ul></li><li>underlying host<ul><li>has visibility in to all of the proceeses<ul><li>including those running inside containers</li></ul></li></ul></li></ul><h3 id=network-namespace><a href=#network-namespace class=header-anchor></a>Network namespace</h3><p><img src=/imgs/cka/networking-pre-18.png loading=lazy alt=network-namespace></p><ul><li>host has its own intercates that connect to the local area network</li><li>own routing table, arp table<ul><li>information about rest of the network</li></ul></li></ul><h4 id=ë°©ë²•-8><a href=#%eb%b0%a9%eb%b2%95-8 class=header-anchor></a>ë°©ë²•</h4><ol><li>create a container</li><li>create a network namespace for it<ul><li>it has no visibility to any network related infromation on the host within its namespace</li></ul></li><li>the container have its own virtual interfaces, routing and arp tables</li></ol><h4 id=create-network-namespace><a href=#create-network-namespace class=header-anchor></a>Create network namespace</h4><p><img src=/imgs/cka/networking-pre-19.png loading=lazy alt=create-ns></p><ul><li>ìƒì„±<ul><li><code>ip netns add red</code></li><li><code>ip netns add blue</code></li></ul></li><li>ìƒíƒœ<ul><li><code>ip netns</code></li></ul></li></ul><h4 id=exec-in-network-ns><a href=#exec-in-network-ns class=header-anchor></a>Exec in network ns</h4><p><img src=/imgs/cka/networking-pre-20.png loading=lazy alt=exec-ns></p><ul><li>interfaces<ul><li>to list interfaces on my host<ul><li><code>ip link</code></li></ul></li><li>to list interfaces on network namespace<ul><li><code>ip netns exec red ip link</code></li><li><code>ip -n red link</code></li></ul></li></ul></li><li>arp & route table<ul><li>no entries in namespace</li><li>these namespaces has no connectivity to other network</li></ul></li></ul><h3 id=connect><a href=#connect class=header-anchor></a>Connect</h3><p><img src=/imgs/cka/networking-pre-21.png loading=lazy alt=connect-ns></p><ul><li>connect namespaces together using a virtual ehternet pair or a virtual cable</li></ul><h4 id=ë°©ë²•-9><a href=#%eb%b0%a9%eb%b2%95-9 class=header-anchor></a>ë°©ë²•</h4><ol><li>create the cable<ul><li><code>ip link add veth-red type veth peer name veth-blue</code></li></ul></li><li>attach each interface to the appropriate namespace<ul><li><code>ip link set veth-red netns red</code></li><li><code>ip link set veth-blue netns blue</code></li></ul></li><li>assign IP addresses to each of these namespaces<ul><li><code>ip -n red addr add 192.168.15.1 dev veth-red</code></li><li><code>ip -n blue addr add 192.168.15.2 dev veth-blue</code></li></ul></li><li>bring up the interface<ul><li><code>ip -n red link set veth-red up</code></li><li><code>ip -n blue link set veth-blue up</code></li></ul></li></ol><h4 id=í™•ì¸><a href=#%ed%99%95%ec%9d%b8 class=header-anchor></a>í™•ì¸</h4><ul><li>arp table is created
<img src=/imgs/cka/networking-pre-22.png loading=lazy alt=arp-table></li></ul><h3 id=virtual-network><a href=#virtual-network class=header-anchor></a>Virtual network</h3><ul><li>many pods â†’ need a switch</li><li>create a virtual switch</li><li>how to create virtual networks?<ul><li>ì—¬ëŸ¬ open sourceë“¤</li><li>ì—¬ê¸°ì„  linux bridge</li></ul></li></ul><h4 id=ìƒì„±><a href=#%ec%83%9d%ec%84%b1 class=header-anchor></a>ìƒì„±</h4><p><img src=/imgs/cka/networking-pre-23.png loading=lazy alt=create-vns></p><ol><li>add a new interface to the host<ul><li><code>ip link add v-net-0 type bridge</code></li></ul></li><li>check<ul><li><code>ip link</code></li></ul></li><li>turn up<ul><li><code>ip link set de v-net-0 up</code></li></ul></li><li>connect the namespaces to new virtual network switch</li></ol><h4 id=ì—°ê²°><a href=#%ec%97%b0%ea%b2%b0 class=header-anchor></a>ì—°ê²°</h4><p><img src=/imgs/cka/networking-pre-24.png loading=lazy alt=connect-vns></p><ol><li>create a cable<ul><li><code>ip link add veth-red type veth peer name veth-red-br</code></li><li><code>ip link add veth-blue type veth peer name veth-blue-br</code></li></ul></li><li>attach one end of this interface to the red namespace<ul><li><code>ip link set veth-red netns red</code></li><li><code>ip link set veth-red-br master v-net-0</code></li></ul></li><li>same job with 2 in blue<ul><li><code>ip link set veth-blue netns blue</code></li><li><code>ip link set veth-blue-br master v-net-0</code></li></ul></li><li>assign ip address<ul><li><code>ip -n red addr add 192.168.15.1 dev veth-red</code></li><li><code>ip -n blue addr add 192.168.15.2 dev veth-blue</code></li></ul></li><li>turn devices up<ul><li><code>ip -n red link set veth-red up</code></li><li><code>ip -n blue link set veth-blue up</code></li></ul></li></ol><h4 id=host-and-namespace><a href=#host-and-namespace class=header-anchor></a>Host and namespace</h4><p><img src=/imgs/cka/networking-pre-25.png loading=lazy alt=host-vns></p><ul><li>try trired to reach one of these interfaces in this namespaces from my host<ul><li>â†’ doesn&rsquo;t work</li></ul></li><li>connect interface with host<ul><li><code>ip addr add 192.168.15.5/25 dev net-0</code></li></ul></li></ul><h3 id=localhost><a href=#localhost class=header-anchor></a>Localhost</h3><h4 id=ìƒí™©-8><a href=#%ec%83%81%ed%99%a9-8 class=header-anchor></a>ìƒí™©</h4><p><img src=/imgs/cka/networking-pre-26.png loading=lazy alt=localhost-status></p><ul><li>can&rsquo;t reach the outside world and no one from outside world can not reach hosted inside</li><li>how to configure this bridge to reach the network through the internet port?<ul><li>â†’ need to add an entry in to the routing table to provide a gateway or door to the outside world</li></ul></li><li>localhost<ul><li>has all these namesapces</li><li>has an interface to attach to the private network</li><li>a gateway that connects the two networks toghter</li></ul></li></ul><h4 id=ë°©ë²•-10><a href=#%eb%b0%a9%eb%b2%95-10 class=header-anchor></a>ë°©ë²•</h4><p><img src=/imgs/cka/networking-pre-27.png loading=lazy alt=localhost-method></p><ol><li>add localhost to router<ul><li><code>ip netns exec blue ip route add 192.168.1.0/24 via 192.168.15.5</code></li><li>host has two ip addresses<ul><li>192.168.15.5</li><li>external network: 192.168.1.2</li></ul></li></ul></li><li>forward<ul><li><code>iptables -t nat -A POSTROUT -s 192.168.15.0/25 -j MASQUERADE</code></li></ul></li><li>connect to internet<ul><li><code>ip netns exec blue ip route add default via 192.168.15.5</code></li></ul></li></ol><h2 id=docker-networking><a href=#docker-networking class=header-anchor></a>Docker Networking</h2><h3 id=single-docker-host><a href=#single-docker-host class=header-anchor></a>Single Docker host</h3><ul><li>Has an ethernet interface at eth0 that connects to the local network with the IP address 192.168.1.10</li><li>run a container, there is different networking option to choose from<ul><li>none network</li><li>host network</li><li>bridge</li></ul></li></ul><h4 id=none-network><a href=#none-network class=header-anchor></a>None network</h4><p><img src=/imgs/cka/networking-pre-28.png loading=lazy alt=docker-none></p><ul><li>docker container is not attached to any network</li></ul><h4 id=host-network><a href=#host-network class=header-anchor></a>Host network</h4><p><img src=/imgs/cka/networking-pre-29.png loading=lazy alt=docker-host></p><ul><li>container is attached to the host&rsquo;s network</li><li>sharing host network, cannot use same port at same time</li></ul><h4 id=bridge><a href=#bridge class=header-anchor></a>Bridge</h4><p><img src=/imgs/cka/networking-pre-30.png loading=lazy alt=docker-bridge></p><ul><li>internal private network is created which the docker host and containers attach to</li><li>ip address: 172.17.0.0</li></ul><h3 id=bridge-1><a href=#bridge-1 class=header-anchor></a>Bridge</h3><h4 id=ìƒíƒœ><a href=#%ec%83%81%ed%83%9c class=header-anchor></a>ìƒíƒœ</h4><p><img src=/imgs/cka/networking-pre-31.png loading=lazy alt=bridge-status></p><ul><li><code>docker network ls</code><ul><li>docker calls the network by the name bridge</li></ul></li><li><code>ip link</code><ul><li>host the name of network is created with docker0</li><li>interface is currently down</li></ul></li><li><code>ip addr</code></li></ul><h4 id=ìƒì„±-1><a href=#%ec%83%9d%ec%84%b1-1 class=header-anchor></a>ìƒì„±</h4><p><img src=/imgs/cka/networking-pre-32.png loading=lazy alt=bridge-crate></p><ul><li>container is created</li><li>docker creates a network namepsace for it</li><li><code>ip netns</code></li><li><code>docker inspect ~~</code></li></ul><h3 id=attach-container-to-the-bridge><a href=#attach-container-to-the-bridge class=header-anchor></a>Attach container to the bridge</h3><p><img src=/imgs/cka/networking-pre-33.png loading=lazy alt=bridge-attach></p><ol><li>creates a virtual cable<ul><li><code>ip link</code> on docker host<ul><li>end of the interface which is attached to the local bridge docker0</li></ul></li><li><code>ip -n ~~ link</code></li></ul></li><li>check the ip<ul><li><code>ip -n ~~ addr</code></li></ul></li></ol><h3 id=port-mapping><a href=#port-mapping class=header-anchor></a>Port Mapping</h3><p><img src=/imgs/cka/networking-pre-34.png loading=lazy alt=port-mapping></p><ul><li>port publishing or port mapping options<ul><li>to allow to access the applications hosted on containers</li><li><code>docker run -p 8080:80 nginx</code></li></ul></li></ul><h4 id=ë°©ë²•-11><a href=#%eb%b0%a9%eb%b2%95-11 class=header-anchor></a>ë°©ë²•</h4><p><img src=/imgs/cka/networking-pre-35.png loading=lazy alt=port-mapping-how></p><ul><li>requirements<ul><li>forward traffic coming in one port to another port on the server</li></ul></li></ul><ol><li>add rules to docker chain</li><li>set destination to include the containers IP</li><li>see the rule<ul><li><code>iptables -nvL -t nat</code>
<img src=/imgs/cka/networking-pre-36.png loading=lazy alt=port-mapping-rule></li></ul></li></ol><h2 id=cluster-networking><a href=#cluster-networking class=header-anchor></a>Cluster Networking</h2><h3 id=ip--fqdn><a href=#ip--fqdn class=header-anchor></a>IP & FQDN</h3><ol><li>k8s cluster consists of master and worker nodes</li><li>each node must have at least 1 interface connected to a network</li><li>each interface must have an address configured</li><li>the host must have a unique hostname set, unique MAC address<ul><li>note this if you created the VMs by cloning from existing ones.</li></ul></li></ol><h3 id=ports><a href=#ports class=header-anchor></a>PORTS</h3><p>There are some ports to be opened.</p><h4 id=master><a href=#master class=header-anchor></a>Master</h4><ul><li><code>kube-api</code> - 6443</li><li><code>kubelet</code> - 10250</li><li><code>kube-scheduler</code> - 10251</li><li><code>kube-controller-manager</code> - 10252</li><li><code>etcd</code><ul><li>2379</li><li>2380, if multiple master nodes</li></ul></li></ul><h4 id=worker><a href=#worker class=header-anchor></a>Worker</h4><ul><li><code>kubelet</code> - 10250</li><li><code>services</code> - 30000~32767</li></ul><h3 id=practice><a href=#practice class=header-anchor></a>Practice</h3><h4 id=what-is-the-network-interface-configured-for-cluster-connectivity-on-the-master-node-node-to-node-communication><a href=#what-is-the-network-interface-configured-for-cluster-connectivity-on-the-master-node-node-to-node-communication class=header-anchor></a>What is the network interface configured for cluster connectivity on the master node? node-to-node communication</h4><p>Run: <code>kubectl get nodes -o wide</code> to see the IP address assigned to the controlplane node.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>root@controlplane:~# kubectl get nodes controlplane -o wide
</span></span><span class=line><span class=cl>NAME           STATUS   ROLES                  AGE     VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION   CONTAINER-RUNTIME
</span></span><span class=line><span class=cl>controlplane   Ready    control-plane,master   4h46m   v1.20.0   10.3.116.12   &lt;none&gt;        Ubuntu 18.04.5 LTS   5.4.0-1041-gcp   docker://19.3.0
</span></span></code></pre></td></tr></table></div></div><p>In this case, the internal IP address used for node for node to node communication is <code>10.3.116.12</code>.</p><p><strong>Important Note</strong> : The result above is just an example, the node IP address will vary for each lab.</p><p>Next, find the network interface to which this IP is assigned by making use of the <code>ip a</code> command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>root@controlplane:~# ip a | grep -B2 10.3.116.12
</span></span><span class=line><span class=cl>16476: eth0@if16477: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1450 qdisc noqueue state UP group default
</span></span><span class=line><span class=cl>    link/ether 02:42:0a:03:74:0c brd ff:ff:ff:ff:ff:ff link-netnsid 0
</span></span><span class=line><span class=cl>    inet 10.3.116.12/24 brd 10.3.116.255 scope global eth0
</span></span><span class=line><span class=cl>root@controlplane:~#
</span></span></code></pre></td></tr></table></div></div><p>Here you can see that the interface associated with this IP is eth0 on the host.</p><h4 id=what-is-the-mac-address-assigned-to-node01><a href=#what-is-the-mac-address-assigned-to-node01 class=header-anchor></a>What is the MAC address assigned to node01?</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; arp node01
</span></span><span class=line><span class=cl>Address                  HWtype  HWaddress           Flags Mask            Iface
</span></span><span class=line><span class=cl>10.153.142.8             ether   02:42:0a:99:8e:07   C                     eth0
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-tags><a href=/blog/tags/k8s/>K8s</a>
<a href=/blog/tags/cka/>Cka</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/blog/p/cka-cka-%ED%95%A9%EA%B2%A9-%ED%9B%84%EA%B8%B0/><div class=article-details><h2 class=article-title>(CKA) CKA í•©ê²© í›„ê¸°</h2></div></a></article><article><a href=/blog/p/cka-09.-design-and-install-a-k8s-cluster/><div class=article-details><h2 class=article-title>(CKA) 09. Design and Install a k8s Cluster</h2></div></a></article><article><a href=/blog/p/cka-08.-networking/><div class=article-details><h2 class=article-title>(CKA) 08. Networking</h2></div></a></article><article><a href=/blog/p/cka-07.-storage/><div class=article-details><h2 class=article-title>(CKA) 07. Storage</h2></div></a></article><article><a href=/blog/p/cka-06.-security/><div class=article-details><h2 class=article-title>(CKA) 06. Security</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=aiden-jeon/aiden-jeon.github.io issue-term=pathname label=comment crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 Aiden's Camp</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.27.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>